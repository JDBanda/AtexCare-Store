{% extends 'demo/menu_quienes.html' %}
{% block title %}Detalle del carrito{% endblock title %}
{% block body %}
<section>
    <div class="content">
        <div>
            <a href="{% url 'productos' %}">
                <i class='bx bx-left-arrow-circle bx-xs'> Volver a productos</i>
            </a>
        </div>
        {% if totalArticulos > 0 %}
        <h2 class="title">Tu carrito de compras</h2>
        <h3 class="subtitle">({{totalArticulos}} art√≠culos)</h3>
        {% for o in objetos %}
        {% csrf_token %}
        <div class="body-carrito" id="{{o.id}}">
            <div class="columns is-mobile is-vcentered head-carrito">
                <div class="column is-two-thirds">
                    <h4><a href="{% url 'producto' o.producto.id %}">{{o.producto.name}}</a></h4>
                </div>
                <div class="xbtn column">
                    <button class="button is-outlined is-small deleteItem"><i class='bx bx-x'></i></button>
                </div>
            </div>
            <div class="columns is-mobile carrito">
                <div class="column">
                    <img src="{{o.producto.image.url}}" alt="{{o.producto.name}}">
                </div>
                <div class="column is-two-thirds xbtn">
                    <p class="stock">L√≠mite en stock: <span>{{o.producto.stock}}</span></p>
                    <p class="xbtn  price">
                        <button class="button is-outlined cantidadItem">
                            <i class='bx bx-minus'></i>
                        </button>
                        <span class="cant"> {{o.cantidad}} </span>
                        <button class="button is-outlined cantidadItem">
                            <i class='bx bx-plus'></i>
                        </button>
                    </p>
                    <h4 class="xbtn">$
                        <span class="price mont" precio="{{o.producto.price}}">{{o.monto}}</span>
                    </h4>
                </div>
            </div>
        </div>
        <br>
        {% endfor %}
        <br>
        <div class="columns pagar is-vcentered">
            <div class="column">
                <p class="title has-text-centered">Total: $<span id="a_pagar"></span></p>
            </div>
            <div class="column xbtn">
                <button id="checkout" class="button is-info is-fullwidth is-medium">Pagar</button>
            </div>
        </div>
        {% else %}
        <br>
        <h2 class="title">Sin art√≠culos</h2>
        <br>
        <h5>Parece que a√∫n no has a√±adido art√≠culos, puedes agregar art√≠culos en cualquier momento üò∑</h5>
        <br><br><br>
        {% endif %}
    </div>
</section>
{% load static %}
<script src="{% static 'demo/js/crud-car.js' %}"></script>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@10"></script>
{% endblock body %}